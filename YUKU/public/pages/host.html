<!DOCTYPE html>
<html lang="en">
<head>
    <!-- SEO & Meta -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yuku-prtocol's Blog | Tech & Ideas</title>
    <meta name="description" content="Read insights on technology, coding, and life.">

    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 2. Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- 3. PrismJS (Code Highlighting for Tech Blog) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>

    <!-- 4. Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        body { font-family: 'Outfit', sans-serif; }
        
        /* Article Typography */
        .prose-content { font-family: 'Merriweather', serif; line-height: 1.8; color: #374151; }
        .prose-content h1 { font-size: 2.25rem; font-weight: 800; margin: 2rem 0 1rem; color: #111827; }
        .prose-content h2 { font-size: 1.8rem; font-weight: 700; margin: 2rem 0 1rem; color: #064e3b; }
        .prose-content p { margin-bottom: 1.5rem; font-size: 1.125rem; }
        .prose-content ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1.5rem; }
        .prose-content blockquote { border-left: 4px solid #10b981; padding-left: 1rem; font-style: italic; color: #4b5563; background: #f0fdf4; padding: 1rem; border-radius: 0 8px 8px 0; margin-bottom: 1.5rem; }
        /* Code Block Styling */
        .prose-content pre { border-radius: 0.5rem; margin: 1.5rem 0; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .prose-content img { border-radius: 0.5rem; margin: 2rem auto; width: 100%; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .prose-content a { color: #059669; text-decoration: underline; text-underline-offset: 4px; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col selection:bg-emerald-200">

    <!-- === HEADER === -->
    <header class="bg-white/90 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50 transition-all duration-300">
        <div class="max-w-6xl mx-auto px-6 h-20 flex items-center justify-between">
            <!-- Logo -->
            <div onclick="router.home()" class="cursor-pointer flex items-center gap-3 group">
                <div class="w-10 h-10 bg-emerald-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:rotate-12 transition transform">
                    V
                </div>
                <h1 class="text-2xl font-bold tracking-tight text-gray-800 group-hover:text-emerald-700 transition">yuku-protocol's <span class="text-emerald-500">Blog</span></h1>
            </div>
            
            <!-- Social Links -->
            <div class="flex items-center gap-6">
                <a href="#" class="text-gray-500 hover:text-emerald-600 transition hover:scale-110"><i class="fab fa-twitter text-xl"></i></a>
                <a href="#" class="text-gray-500 hover:text-emerald-600 transition hover:scale-110"><i class="fab fa-github text-xl"></i></a>
            </div>
        </div>
    </header>

    <!-- === MAIN CONTENT === -->
    <main class="flex-1 max-w-6xl mx-auto w-full p-6">
        
        <!-- [SCENE 1] HOME PAGE -->
        <div id="scene-home" class="animate-fade-in">
            <div class="text-center py-20 border-b border-gray-100 mb-12">
                <span class="text-emerald-600 font-bold tracking-widest text-xs uppercase mb-3 block">Welcome to my space</span>
                <h2 class="text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight">Thoughts, Code & <br><span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-teal-500">Everything In Between.</span></h2>
                <p class="text-gray-500 text-lg max-w-2xl mx-auto leading-relaxed">Join me on a journey through technology, software architecture, and life.</p>
            </div>

            <!-- Loader -->
            <div id="loader" class="text-center py-20 hidden">
                <div class="inline-block w-10 h-10 border-4 border-emerald-200 border-t-emerald-600 rounded-full animate-spin"></div>
                <p class="mt-4 text-gray-400 font-medium">Fetching latest stories...</p>
            </div>

            <!-- Grid -->
            <div id="posts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 pb-20"></div>
        </div>

        <!-- [SCENE 2] ARTICLE READER -->
        <div id="scene-article" class="hidden max-w-4xl mx-auto">
            
            <button onclick="router.home()" class="mb-10 flex items-center gap-2 text-gray-500 hover:text-emerald-600 transition font-medium group px-4 py-2 rounded-lg hover:bg-gray-100 w-fit">
                <i class="fas fa-arrow-left group-hover:-translate-x-1 transition"></i> Back to Home
            </button>

            <article class="bg-white rounded-3xl shadow-xl shadow-gray-100/50 border border-gray-100 overflow-hidden">
                <div id="reader-cover-container" class="h-64 md:h-[400px] w-full overflow-hidden hidden relative">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent z-10"></div>
                    <img id="reader-cover" src="" class="w-full h-full object-cover">
                </div>
                
                <div class="p-8 md:p-16">
                    <!-- Meta Info -->
                    <div class="flex flex-wrap items-center gap-6 text-sm text-gray-500 mb-8 border-b border-gray-100 pb-8">
                        <span id="reader-date" class="flex items-center gap-2 font-medium"><i class="far fa-calendar text-emerald-500"></i> ...</span>
                        <span id="reader-views" class="flex items-center gap-2 bg-emerald-50 text-emerald-700 px-3 py-1 rounded-full font-bold text-xs uppercase tracking-wide"><i class="far fa-eye"></i> ... Views</span>
                        <span id="reader-tag" class="text-emerald-600 font-bold uppercase tracking-wider text-xs border border-emerald-100 px-3 py-1 rounded-full">#Tech</span>
                    </div>

                    <h1 id="reader-title" class="text-4xl md:text-5xl font-bold text-gray-900 mb-10 leading-tight"></h1>

                    <!-- Content -->
                    <div id="reader-content" class="prose-content"></div>
                </div>

                <!-- Share Section (NO LIKES) -->
                <div class="bg-gray-50 p-8 border-t border-gray-100 flex flex-col md:flex-row items-center justify-center gap-6">
                    <span class="text-gray-400 font-bold text-xs uppercase tracking-widest">Share this article</span>
                    <div class="flex gap-4">
                        <button onclick="app.shareTwitter()" class="flex items-center gap-2 px-5 py-2 bg-blue-500 text-white rounded-full font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 hover:-translate-y-1">
                            <i class="fab fa-twitter"></i> Tweet
                        </button>
                        <button onclick="app.shareCopy()" class="flex items-center gap-2 px-5 py-2 bg-gray-800 text-white rounded-full font-bold hover:bg-gray-900 transition shadow-lg hover:-translate-y-1">
                            <i class="fas fa-link"></i> Copy Link
                        </button>
                    </div>
                </div>
            </article>
        </div>

    </main>

    <!-- === FOOTER === -->
    <footer class="bg-white border-t border-gray-200 py-12 mt-12">
        <div class="max-w-6xl mx-auto px-6 text-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">yuku-protocol's Blog</h2>
            <p class="text-gray-400 text-sm mb-8">Building logic, one line of code at a time.</p>
            <div class="text-gray-300 text-xs">
                &copy; <span id="year"></span> All rights reserved.
            </div>
        </div>
    </footer>

    <!-- === LOGIC === -->
    <script>
        const API_BASE_URL = "https://giant-noell-pixelart002-1c1d1fda.koyeb.app";

        const router = {
            home: () => {
                document.getElementById('scene-home').classList.remove('hidden');
                document.getElementById('scene-article').classList.add('hidden');
                window.scrollTo({top: 0, behavior: 'smooth'});
                history.pushState("", document.title, window.location.pathname);
            },
            article: (slug) => {
                document.getElementById('scene-home').classList.add('hidden');
                document.getElementById('scene-article').classList.remove('hidden');
                window.scrollTo({top: 0, behavior: 'smooth'});
                window.location.hash = slug;
                app.fetchSinglePost(slug);
            }
        };

        const app = {
            init: () => {
                document.getElementById('year').innerText = new Date().getFullYear();
                const hash = window.location.hash.substring(1);
                if(hash) router.article(hash);
                else app.fetchPosts();
            },

            fetchPosts: async () => {
                const loader = document.getElementById('loader');
                const grid = document.getElementById('posts-grid');
                
                loader.classList.remove('hidden');
                grid.innerHTML = ''; 

                try {
                    const res = await fetch(`${API_BASE_URL}/blog/`);
                    const posts = await res.json();
                    loader.classList.add('hidden');

                    if(posts.length === 0) {
                        grid.innerHTML = `<div class="col-span-full text-center py-20 text-gray-400">No articles published yet.</div>`;
                        return;
                    }

                    posts.forEach(post => {
                        const date = new Date(post.created_at).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
                        const plainText = post.content.replace(/[#*_`\[\]]/g, '').substring(0, 120) + "...";
                        
                        let imgHtml = post.cover_image ? 
                            `<img src="${post.cover_image}" class="w-full h-56 object-cover group-hover:scale-105 transition duration-700">` : 
                            `<div class="w-full h-56 bg-gradient-to-br from-emerald-50 to-teal-100 flex items-center justify-center text-emerald-200"><i class="fas fa-image text-5xl opacity-50"></i></div>`;

                        grid.innerHTML += `
                            <div onclick="router.article('${post.slug}')" class="group bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-xl hover:-translate-y-2 transition duration-300 cursor-pointer overflow-hidden flex flex-col h-full">
                                <div class="overflow-hidden relative">
                                    <div class="absolute inset-0 bg-black/0 group-hover:bg-black/5 transition z-10"></div>
                                    ${imgHtml}
                                    <div class="absolute top-4 left-4 z-20">
                                        <span class="bg-white/90 backdrop-blur-sm text-emerald-700 text-xs font-bold px-3 py-1 rounded-full shadow-sm uppercase tracking-wide">
                                            ${post.tags[0] || 'Blog'}
                                        </span>
                                    </div>
                                </div>
                                <div class="p-6 flex flex-col flex-1">
                                    <div class="text-xs text-gray-400 mb-3 flex items-center gap-2">
                                        <i class="far fa-clock"></i> ${date}
                                    </div>
                                    <h3 class="text-xl font-bold text-gray-800 mb-3 group-hover:text-emerald-600 transition leading-tight">
                                        ${post.title}
                                    </h3>
                                    <p class="text-gray-500 text-sm leading-relaxed mb-6 flex-1">
                                        ${plainText}
                                    </p>
                                    <div class="flex items-center text-emerald-600 font-bold text-sm group-hover:gap-2 transition-all">
                                        Read Story <i class="fas fa-arrow-right ml-2"></i>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                } catch (err) {
                    loader.classList.add('hidden');
                    grid.innerHTML = `<div class="col-span-full text-center text-red-400 py-10">Server sleeping? Check console.</div>`;
                }
            },

            fetchSinglePost: async (slug) => {
                // UI Reset
                document.getElementById('reader-title').innerText = "Loading...";
                document.getElementById('reader-content').innerHTML = `<div class="animate-pulse space-y-4"><div class="h-4 bg-gray-200 rounded w-3/4"></div><div class="h-4 bg-gray-200 rounded w-full"></div></div>`;
                document.getElementById('reader-cover-container').classList.add('hidden');

                try {
                    const res = await fetch(`${API_BASE_URL}/blog/${slug}`);
                    if(!res.ok) throw new Error("Not Found");
                    const post = await res.json();

                    document.getElementById('reader-title').innerText = post.title;
                    document.getElementById('reader-date').innerText = new Date(post.created_at).toLocaleDateString('en-US', { dateStyle: 'long' });
                    document.getElementById('reader-views').innerHTML = `<i class="far fa-eye"></i> ${post.views} Views`;
                    document.getElementById('reader-tag').innerText = post.tags.length > 0 ? `#${post.tags[0]}` : '#Story';

                    if(post.cover_image && post.cover_image.startsWith('http')) {
                        document.getElementById('reader-cover').src = post.cover_image;
                        document.getElementById('reader-cover-container').classList.remove('hidden');
                    }

                    // Markdown -> HTML
                    document.getElementById('reader-content').innerHTML = marked.parse(post.content);
                    
                    // Highlight Code Blocks
                    Prism.highlightAll();

                } catch (err) {
                    document.getElementById('reader-title').innerText = "404 - Article Not Found";
                    document.getElementById('reader-content').innerHTML = "<p class='text-red-500'>Post not found.</p>";
                }
            },

            shareTwitter: () => {
                const title = document.getElementById('reader-title').innerText;
                const url = window.location.href;
                window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`, '_blank');
            },

            shareCopy: () => {
                navigator.clipboard.writeText(window.location.href);
                alert('Link Copied!');
            }
        };

        // Handle Back Button
        window.onpopstate = () => {
            if(!window.location.hash) router.home();
            else router.article(window.location.hash.substring(1));
        };

        document.addEventListener('DOMContentLoaded', app.init);
    </script>
</body>
</html>